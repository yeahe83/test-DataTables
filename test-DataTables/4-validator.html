<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
	<meta charset="utf-8" />

    <!-- css -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/datatables/1.10.8/css/dataTables.bootstrap.min.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/bootstrap-datepicker/1.5.0-RC1/css/bootstrap-datepicker.min.css" rel="stylesheet">
    <style>
        .modal .has-feedback .form-control {
            padding-right: 5px;
        }
        .modal .form-horizontal .form-group {
            margin: 0px
        }

    </style>
</head>
<body>

    <!-- html -->
    <div class="container">
        <div class="row">
            <div class="panel panel-danger">
                <div class="panel-heading">
                    <h3 class="panel-title">标题</h3>
                </div>
                <div class="panel-body">
                    <div class="pull-right">
                        <button type="button" class="btn btn-sm btn-primary" id="btn_add"><i class="fa fa-plus"></i> 新增</button>
                    </div>
                    <table class="table table-striped table-hover" id="table">
                        <thead></thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h5 class="modal-title">标题</h5>
                        </div>
                        <div class="modal-body">

                            <form id="form1" method="post" class="form-horizontal"
                                  data-bv-message="This value is not valid"
                                  data-bv-feedbackicons-valid="glyphicon glyphicon-ok"
                                  data-bv-feedbackicons-invalid="glyphicon glyphicon-remove"
                                  data-bv-feedbackicons-validating="glyphicon glyphicon-refresh">

                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label" for="Name">姓名</label>
                                                <input class="form-control input-sm" id="Name" name="Name" data-field="Name" type="text" placeholder="" />
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label" for="Sex">性别</label>
                                                <select class="form-control input-sm" id="Sex" name="Sex" data-field="Sex"></select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label" for="Birth">出生日期</label>
                                                <input class="form-control input-sm input-date" id="Birth" name="Birth" data-field="Birth" type="text" placeholder="" data-date-format="yyyy-mm-dd" data-date-today-btn="true" data-date-language="zh-CN" data-date-orientation="top auto" />
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label" for="Age">年龄</label>
                                                <input class="form-control input-sm" id="Age" name="Age" data-field="Age" type="text" placeholder="" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="input-daterange" data-date-format="yyyy-mm-dd" data-date-language="zh-CN" data-date-clear-btn="true">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="control-label" for="DateStart">开始日期</label>
                                                    <input class="form-control input-sm" id="DateStart" name="DateStart" data-field="DateStart" type="text" placeholder="" />
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="control-label" for="DateEnd">结束日期</label>
                                                    <input class="form-control input-sm" id="DateEnd" name="DateEnd" data-field="DateEnd" type="text" placeholder="" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="form-group">
                                                <label class="control-label" for="Memo">描述</label>
                                                <textarea class="form-control input-sm" id="Memo" name="Memo" data-field="Memo" placeholder="" rows="3"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" id="IsValid" name="IsValid" data-field="IsValid"> 是否有效
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default btn-sm cancel" data-dismiss="modal"><i class="fa fa-times"></i> 关闭</button>
                            <button type="submit" class="btn btn-primary btn-sm save"><i class="fa fa-save"></i> 保存</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- js -->
    <script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="//cdn.bootcss.com/datatables/1.10.8/js/jquery.dataTables.min.js"></script>
    <script src="//cdn.bootcss.com/datatables/1.10.8/js/dataTables.bootstrap.min.js"></script>
    <script src="js/xy.datatables.js"></script>
    <script src="//cdn.bootcss.com/bootstrap-datepicker/1.5.0-RC1/js/bootstrap-datepicker.min.js"></script>
    <script src="//cdn.bootcss.com/bootstrap-datepicker/1.5.0-RC1/locales/bootstrap-datepicker.zh-CN.min.js"></script>
    <script src="js/bootstrapValidator.js"></script>
    <script>

        $(function () {

            // 性别下拉
            $("#Sex").append(String()
                + "<option value='male'>男</option>"
                + "<option value='female'>女</option>");

            // 验证声明
            $("#form1").bootstrapValidator({
                submitHandler: function (validator, form, submitButton) {
                    // Do nothing
                },
                fields: {
                    Name: {
                        validators: {
                            notEmpty: {
                                message: "请输入姓名"
                            }
                        }
                    },
                    Age: {
                        validators: {
                            notEmpty: {
                                message: "请输入年龄"
                            },
                            integer: {
                                message: "年龄为整数"
                            },
                            between: {
                                min: 0,
                                max: 100,
                                message: "年龄范围：0-100"
                            }
                        }
                    },
                },

            });

            // dataTables
            new xy.datatables({
                tableId: "table",
                btnAddId: "btn_add",
                modalId: "modal",
                optionDom: 'rt<"bottom"ip><"clear">',
                cols: [
                    { display: "ID", fieldName: "ID", visible: false, key: true },
                    { display: "姓名", fieldName: "Name", visible: true },
                    { display: "性别", fieldName: "Sex", visible: true, render: function (data, type, row) {
                        switch (data) {
                            case "male": return "男";
                            case "female": return "女";
                            default: return "";
                        }
                    } },
                    { display: "出生日期", fieldName: "Birth", visible: true },
                    { display: "年龄", fieldName: "Age", visible: true },
                    { display: "开始日期", fieldName: "DateStart", visible: true },
                    { display: "结束日期", fieldName: "DateEnd", visible: true },
                    { display: "描述", fieldName: "Memo", visible: false },
                    { display: "是否有效", fieldName: "IsValid", visible: true, render: function (data, type, row) {
                        return data ? "是" : "否";
                    } },
                    { display: "", fieldName: null, action: "Edit", visible: true }
                ],
                ajax: {
                    show: "server/datepicker.ashx?Func=show" + "&date=" + new Date().getTime(), // 可以加其他查询条件
                    add: "server/datepicker.ashx?Func=add" + "&date=" + new Date().getTime(), // 若有key则无需加查询条件
                    edit: "server/datepicker.ashx?Func=edit" + "&date=" + new Date().getTime(), // 若有key则无需加查询条件
                    delete: "server/datepicker.ashx?Func=delete" + "&date=" + new Date().getTime(), // 若有key则无需加查询条件
                },
                fnModalInit: function () {
                    $('#modal .input-date').datepicker('remove');
                    $('#modal .input-daterange').datepicker('remove');
                    return true;
                },
                fnModalShowing: function () {
                    $('#modal .input-date').datepicker();
                    $('#modal .input-daterange').datepicker();

                    // 清空验证标签
                    var bootstrapValidator = $("#form1").data('bootstrapValidator');
                    bootstrapValidator.resetForm(false);
                },
                fnModalSubmitting: function () {
                    var bootstrapValidator = $("#form1").data('bootstrapValidator')
                    return bootstrapValidator.validate().isValid();
                },
            }).init();

        })

    </script>

</body>
</html>
