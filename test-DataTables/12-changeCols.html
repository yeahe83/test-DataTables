<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <meta charset="utf-8" />
    <!-- css -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/datatables/1.10.11/css/dataTables.bootstrap.min.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>
    <!-- html -->
    <div class="container">
        <div class="row">
            <div class="panel panel-danger">
                <div class="panel-heading">
                    <h3 class="panel-title">标题</h3>
                </div>
                <div class="panel-body">
                    <select id="select">
                        <option value="1">1</option>
                        <option value="2">2</option>
                    </select>
                    <table class="table table-striped table-bordered table-hover" id="table" width="100%">
                        <thead></thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- js -->
    <script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="//cdn.bootcss.com/datatables/1.10.11/js/jquery.dataTables.min.js"></script>
    <script src="//cdn.bootcss.com/datatables/1.10.11/js/dataTables.bootstrap.min.js"></script>
    <script src="js/xy.datatables.js"></script>
    <script>

        $(function () {
            var _table = {};
            $("#select").change(function () {

                var _cols = [];
                var _data = [];
                if ($(this).val() == 2) {
                    _cols = [
                        { display: "ID", fieldName: "ID", visible: false, key: true },
                        { display: "姓名", fieldName: "Name", visible: true },
                        { display: "职业", fieldName: "Job", visible: true },
                    ];
                    _data = [
                        { ID: 1, Name: "111", Job: "student" },
                        { ID: 2, Name: "222", Job: "work" },
                        { ID: 3, Name: "333", Job: "work" },
                        { ID: 4, Name: "444", Job: "police" },
                    ];
                } else {
                    _cols = [
                        { display: "ID", fieldName: "ID", visible: false, key: true },
                        { display: "姓名", fieldName: "Name", visible: true },
                        { display: "性别", fieldName: "Sex", visible: true },
                        { display: "描述", fieldName: "Memo", visible: true },
                    ];
                    _data = [
                        { ID: 1, Name: "111", Sex: "male", Memo: "" },
                        { ID: 2, Name: "222", Sex: "female", Memo: "" },
                        { ID: 3, Name: "333", Sex: "female", Memo: "" },
                        { ID: 4, Name: "444", Sex: "male", Memo: "" },
                    ];
                }

                // dataTables
                if ($.fn.dataTable.isDataTable("#table")) {
                    _table.destroy();
                }
                var table = new xy.datatables({
                    tableId: "table",
                    btnAddId: "btn_add",
                    modalId: "modal",
                    optionDom: 'rt<"bottom"ip><"clear">',
                    cols: _cols,
                    data: _data
                });
                table.init();
                _table = table.oTable;

            }).change();
        })

    </script>
</body>
</html>
